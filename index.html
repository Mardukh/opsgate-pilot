<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OpsGate Strategic Framework | WordPress Operations Control Plane</title>
  <meta name="description" content="Professional strategic framework: Market analysis, technical architecture, and phased execution plan for OpsGate WordPress operations control plane." />
  
  <style>
    :root{
      --bg: #0a111f;
      --bg2: #071022;
      --panel: #0f1a2e;
      --panel2: #0c172a;
      --text: #f0f5ff;
      --muted: #a9b6d6;
      --line: rgba(255,255,255,.12);
      --accent: #7c5cff;
      --accent2: #00d0ff;
      --critical: #ff4d6d;
      --warning: #ffcc66;
      --success: #25d695;
      --info: #5d8aff;

      --radius: 16px;
      --shadow: 0 20px 50px rgba(0,0,0,.35);
      --shadow2: 0 12px 32px rgba(0,0,0,.25);
      --glow: 0 0 40px rgba(124,92,255,.15);

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, sans-serif;
      --max: 1200px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(1000px 700px at 10% 10%, rgba(124,92,255,.2), transparent 50%),
        radial-gradient(900px 600px at 90% 20%, rgba(0,208,255,.12), transparent 50%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
      line-height: 1.6;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    .wrap {
      max-width: var(--max);
      margin: 0 auto;
      padding: 0 24px;
    }

    /* Header */
    header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(10, 17, 31, 0.95);
      border-bottom: 1px solid var(--line);
      backdrop-filter: blur(16px);
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 0;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 14px;
      font-weight: 700;
      font-size: 1.25rem;
    }

    .logo {
      width: 38px;
      height: 38px;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: var(--glow);
    }

    .nav-links {
      display: flex;
      gap: 4px;
    }

    .nav-link {
      padding: 10px 18px;
      border-radius: 10px;
      color: var(--muted);
      font-size: 0.95rem;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .nav-link:hover {
      background: rgba(255,255,255,.05);
      color: var(--text);
    }

    .btn-primary {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 12px 28px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: #061022;
      font-weight: 700;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-size: 0.95rem;
      box-shadow: 0 12px 30px rgba(124,92,255,.25);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 40px rgba(124,92,255,.3);
    }

    /* Hero */
    .hero {
      padding: 100px 0 80px;
      position: relative;
    }

    .tagline {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      padding: 12px 24px;
      background: rgba(255,255,255,.04);
      border: 1px solid var(--line);
      border-radius: 100px;
      margin-bottom: 40px;
      font-size: 0.95rem;
      font-weight: 600;
      letter-spacing: 0.02em;
    }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
    }

    h1 {
      font-size: 3.75rem;
      line-height: 1.1;
      margin-bottom: 28px;
      letter-spacing: -0.02em;
      font-weight: 800;
      background: linear-gradient(135deg, var(--text) 0%, var(--muted) 100%);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .hero-subtitle {
      font-size: 1.375rem;
      color: var(--muted);
      max-width: 800px;
      margin-bottom: 48px;
      line-height: 1.7;
      font-weight: 400;
    }

    /* Cards & Layout */
    .section {
      padding: 100px 0;
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
      color: var(--accent2);
      font-size: 0.95rem;
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    h2 {
      font-size: 2.75rem;
      margin-bottom: 28px;
      line-height: 1.2;
      font-weight: 700;
      letter-spacing: -0.01em;
    }

    .section-description {
      font-size: 1.125rem;
      color: var(--muted);
      max-width: 800px;
      margin-bottom: 56px;
      line-height: 1.7;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 28px;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 28px;
    }

    .grid-4 {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 28px;
    }

    .card {
      background: rgba(255,255,255,.03);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      padding: 36px;
      backdrop-filter: blur(10px);
      transition: border-color 0.3s ease;
    }

    .card:hover {
      border-color: rgba(124,92,255,.3);
    }

    .card h3 {
      font-size: 1.5rem;
      margin-bottom: 20px;
      font-weight: 700;
      color: var(--text);
    }

    .card p {
      color: var(--muted);
      line-height: 1.7;
      margin-bottom: 20px;
      font-size: 1rem;
    }

    .divider {
      height: 1px;
      background: var(--line);
      margin: 60px 0;
    }

    /* Tables */
    .table-container {
      overflow-x: auto;
      border-radius: var(--radius);
      border: 1px solid var(--line);
      background: rgba(0,0,0,.2);
      margin: 24px 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      min-width: 800px;
    }

    th {
      text-align: left;
      padding: 22px 28px;
      background: rgba(255,255,255,.04);
      color: var(--text);
      font-weight: 600;
      border-bottom: 1px solid var(--line);
      font-size: 0.95rem;
    }

    td {
      padding: 22px 28px;
      border-bottom: 1px solid var(--line);
      color: var(--muted);
      vertical-align: top;
      font-size: 0.95rem;
      line-height: 1.6;
    }

    tr:last-child td {
      border-bottom: none;
    }

    /* Architecture Diagram */
    .arch-flow {
      display: grid;
      gap: 20px;
    }

    .arch-step {
      display: flex;
      align-items: flex-start;
      gap: 28px;
      padding: 28px;
      background: rgba(0,0,0,.2);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      transition: transform 0.3s ease;
    }

    .arch-step:hover {
      transform: translateX(4px);
      border-color: rgba(124,92,255,.4);
    }

    .step-number {
      width: 52px;
      height: 52px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: #061022;
      border-radius: 14px;
      font-weight: 800;
      font-size: 1.375rem;
      flex-shrink: 0;
    }

    .step-content {
      flex: 1;
    }

    .step-content h4 {
      font-size: 1.25rem;
      margin-bottom: 12px;
      font-weight: 700;
      color: var(--text);
    }

    .step-content p {
      color: var(--muted);
      margin: 0;
      line-height: 1.7;
    }

    /* Tiers */
    .tier {
      position: relative;
      transition: transform 0.3s ease;
    }

    .tier:hover {
      transform: translateY(-8px);
    }

    .tier.highlight {
      border-color: rgba(124,92,255,.5);
      box-shadow: var(--glow);
    }

    .tier-badge {
      position: absolute;
      top: 20px;
      right: -24px;
      transform: rotate(45deg);
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: #061022;
      padding: 10px 48px;
      font-size: 0.875rem;
      font-weight: 800;
      letter-spacing: 0.05em;
    }

    .price {
      font-size: 3.5rem;
      font-weight: 800;
      margin: 28px 0 8px;
      color: var(--text);
    }

    .price-period {
      color: var(--muted);
      font-size: 0.95rem;
      font-weight: 500;
    }

    /* Status Indicators */
    .status-critical { color: var(--critical); }
    .status-warning { color: var(--warning); }
    .status-success { color: var(--success); }
    .status-info { color: var(--info); }

    /* Hybrid Architecture Visualization */
    .hybrid-visual {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 40px;
      align-items: center;
      margin: 40px 0;
      padding: 40px;
      background: rgba(0,0,0,.2);
      border-radius: var(--radius);
      border: 1px solid var(--line);
    }

    .hybrid-column {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .hybrid-connector {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      color: var(--accent2);
      font-weight: 600;
    }

    .connector-line {
      width: 2px;
      height: 100px;
      background: linear-gradient(to bottom, var(--accent), var(--accent2));
    }

    /* Evidence-First Callout */
    .evidence-callout {
      background: linear-gradient(135deg, rgba(37,214,149,.1), rgba(124,92,255,.05));
      border: 1px solid rgba(37,214,149,.3);
      border-radius: var(--radius);
      padding: 32px;
      margin: 40px 0;
    }

    .evidence-callout h3 {
      color: var(--success);
      margin-bottom: 20px;
    }

    /* Product to Market Callout */
    .product-callout {
      background: linear-gradient(135deg, rgba(124,92,255,.1), rgba(0,208,255,.05));
      border: 1px solid rgba(124,92,255,.3);
      border-radius: var(--radius);
      padding: 40px;
      margin: 40px 0;
      text-align: center;
    }

    .product-callout h2 {
      margin-bottom: 16px;
      color: var(--text);
    }

    .product-callout p {
      color: var(--muted);
      max-width: 600px;
      margin: 0 auto 24px;
      font-size: 1.125rem;
    }

    /* Footer */
    footer {
      padding: 80px 0;
      border-top: 1px solid var(--line);
      color: var(--muted);
      background: rgba(0,0,0,.2);
    }

    .footer-content {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 60px;
    }

    /* Responsive */
    @media (max-width: 1200px) {
      .grid-3, .grid-4 {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .hybrid-visual {
        grid-template-columns: 1fr;
        gap: 40px;
      }
      
      .hybrid-connector {
        display: none;
      }
    }

    @media (max-width: 768px) {
      .grid-2, .grid-3, .grid-4 {
        grid-template-columns: 1fr;
      }
      
      .nav-links {
        display: none;
      }
      
      h1 {
        font-size: 2.75rem;
      }
      
      h2 {
        font-size: 2.25rem;
      }
      
      .hero {
        padding: 80px 0 60px;
      }
      
      .section {
        padding: 80px 0;
      }
      
      .card {
        padding: 28px;
      }
      
      .footer-content {
        flex-direction: column;
        gap: 40px;
      }
    }

    /* Utility Classes */
    .text-gradient {
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .mono {
      font-family: var(--mono);
      font-size: 0.9em;
      color: var(--accent2);
    }

    .strong {
      color: var(--text);
      font-weight: 600;
    }
    
    .highlight-box {
      background: linear-gradient(135deg, rgba(124,92,255,.1), rgba(0,208,255,.05));
      border: 1px solid rgba(124,92,255,.3);
      border-radius: var(--radius);
      padding: 32px;
      margin: 32px 0;
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <nav class="nav">
        <div class="brand">
          <div class="logo"></div>
          <span>OpsGate</span>
        </div>
        <div class="nav-links">
          <a href="#problem" class="nav-link">Market Analysis</a>
          <a href="#solution" class="nav-link">Solution</a>
          <a href="#hybrid" class="nav-link">Hybrid Architecture</a>
          <a href="#architecture" class="nav-link">Technical Architecture</a>
          <a href="#tiers" class="nav-link">Business Model</a>
          <a href="#execution" class="nav-link">Execution</a>
          <a href="#qa" class="nav-link">QA</a>
        </div>
        <button class="btn-primary" onclick="window.scrollTo({top: document.getElementById('tiers').offsetTop - 80, behavior: 'smooth'})">
          View Business Model
        </button>
      </nav>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section class="hero wrap">
      <div class="tagline">
        <span class="dot"></span>
        <span>STRATEGIC FRAMEWORK — CONFIDENTIAL</span>
      </div>
      <h1>OpsGate: WordPress Operations Control Plane</h1>
      <p class="hero-subtitle">
        A professional framework for implementing an authoritative control plane for WordPress site operations. 
        This document outlines the market opportunity, technical architecture, business model, 
        and phased execution strategy for a dashboard-first operational intelligence platform.
      </p>
      <div class="divider"></div>
      <div class="grid-2">
        <div class="card">
          <h3>Executive Summary</h3>
          <p>
            OpsGate addresses the critical operational visibility gap in the WordPress ecosystem by establishing 
            a single source of truth for site health, security posture, and change management. Unlike fragmented 
            tools that generate static reports, OpsGate delivers real-time, actionable intelligence through 
            an authoritative, dashboard-first control plane.
          </p>
          <p><span class="strong">Market Position:</span> Authoritative control plane, not another scanner</p>
          <p><span class="strong">Core Architecture:</span> API-authoritative with WordPress thin client pattern</p>
          <p><span class="strong">Business Model:</span> Tiered SaaS aligned to operational maturity levels</p>
        </div>
        <div class="card">
          <h3>Core Architectural Principle</h3>
          <p class="mono" style="font-size: 1.1rem; margin-bottom: 24px;">
            Business Model → API → Data Model → Execution → UI
          </p>
          <ul style="color: var(--muted); line-height: 1.8; padding-left: 20px;">
            <li><span class="strong">Hybrid Architecture:</span> WordPress plugin + Web platform integration</li>
            <li><span class="strong">Dashboard-First Product Experience</span> — Intelligence surfaces through UI, not files</li>
            <li><span class="strong">Single Authoritative API</span> — All state changes validated through API</li>
            <li><span class="strong">Evidence-Based Operational Intelligence</span> — Every action produces verifiable evidence</li>
            <li><span class="strong">Agency-Grade Proof-of-Work Systems</span> — Automated client reporting and compliance</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- NEW: First Product to Market Callout -->
    <section class="wrap">
      <div class="product-callout">
        <h2>First Product to Market (Locked)</h2>
        <p>
          OpsGate launches with <strong>free + Starter tiers</strong> featuring: 
          <strong>Dashboard MVP</strong> + <strong>SSL Posture Service</strong> + <strong>Security Scan Service</strong>
        </p>
        <div style="display: flex; gap: 16px; justify-content: center; margin-top: 24px; flex-wrap: wrap;">
          <button class="btn-primary" onclick="window.scrollTo({top: document.getElementById('tiers').offsetTop - 80, behavior: 'smooth'})">
            View Tiers
          </button>
          <button class="btn-primary" style="background: transparent; color: var(--text); border: 1px solid var(--line);" 
                  onclick="window.scrollTo({top: document.getElementById('execution').offsetTop - 80, behavior: 'smooth'})">
            See Sprint 1 Plan
          </button>
        </div>
      </div>
    </section>

    <!-- Market Analysis -->
    <section id="problem" class="wrap section">
      <div class="section-title">
        <span class="dot"></span>
        <span>Market Analysis</span>
      </div>
      <h2>The WordPress Operational Intelligence Gap</h2>
      <p class="section-description">
        Current solutions fail to provide authoritative, real-time operational visibility, forcing site owners 
        and agencies into reactive positions with fragmented tools and no single source of truth.
      </p>

      <div class="grid-3">
        <div class="card">
          <h3>Critical Market Pain Points</h3>
          <p><span class="status-critical strong">Operational Uncertainty</span></p>
          <p>Operators cannot answer fundamental questions about their WordPress installations with confidence.</p>
          
          <p><span class="status-critical strong">Fragmented Visibility</span></p>
          <p>Security, performance, and availability monitoring exist in separate tools with no unified operational view.</p>
          
          <p><span class="status-critical strong">Unprovable Operational Work</span></p>
          <p>Agencies and maintainers cannot systematically demonstrate proactive work or provide client-proof operational timelines.</p>
          
          <p><span class="status-critical strong">Reactive Posture Dominance</span></p>
          <p>Most tools alert only after failures occur, rather than providing proactive intelligence and trend analysis.</p>
        </div>

        <div class="card">
          <h3>Competitive Solution Gaps</h3>
          <p><span class="strong">Security Scanners & Report Generators:</span> Produce static PDFs rather than live operational dashboards</p>
          <p><span class="strong">Hosting Provider Dashboards:</span> Limited to infrastructure metrics, ignoring application-layer intelligence</p>
          <p><span class="strong">Traditional Security Plugins:</span> Focus on prevention mechanisms, lacking operational intelligence</p>
          <p><span class="strong">Basic Monitoring Tools:</span> Alert on symptoms without providing root cause analysis or trend data</p>
          <p><span class="strong">Agency Management Tools:</span> Rely on manual reporting with no automated proof-of-work generation</p>
        </div>

        <div class="card">
          <h3>Market Opportunity & Segmentation</h3>
          <p><span class="strong">WordPress Market Share:</span> 43.1% of all websites (W3Techs, 2024)</p>
          <p><span class="strong">Annual Operational Spend:</span> $200M+ on security and operations tooling</p>
          <p><span class="strong">Primary Target Segments:</span></p>
          <ul style="color: var(--muted); margin-top: 12px; padding-left: 20px; line-height: 1.8;">
            <li><span class="strong">Solo Site Owners</span> (10M+ sites) — Basic visibility needs</li>
            <li><span class="strong">SMB Operators</span> (500K+ businesses) — Automation and reliability focus</li>
            <li><span class="strong">Agencies & Professional Maintainers</span> (50K+ providers) — Portfolio management and proof</li>
          </ul>
          <p><span class="strong">Solution Gap:</span> No authoritative control plane exists for WordPress operations</p>
        </div>
      </div>
    </section>

    <!-- Solution Architecture -->
    <section id="solution" class="wrap section">
      <div class="section-title">
        <span class="dot"></span>
        <span>Solution Architecture</span>
      </div>
      <h2>The OpsGate Control Plane Architecture</h2>
      <p class="section-description">
        A hybrid system where authority resides exclusively in the API layer, WordPress functions as a thin client, 
        and all operational truth is maintained in a single authoritative database system.
      </p>

      <div class="grid-2">
        <div class="card">
          <h3>Architectural Principles</h3>
          <p><span class="strong">1. API Authority</span><br>
          All state changes, data validation, and business logic enforcement occur through the authoritative API layer. The WordPress plugin contains zero authority.</p>
          
          <p><span class="strong">2. Database Truth</span><br>
          PostgreSQL maintains the complete operational state, history, and evidence trail. This serves as the single source of truth for all OpsGate operations.</p>
          
          <p><span class="strong">3. Thin Client Pattern</span><br>
          The WordPress plugin provides UI presentation and local consent storage only. It cannot bypass API validation or enforce business rules.</p>
          
          <p><span class="strong">4. Evidence-First Operations</span><br>
          Every operational action produces verifiable evidence stored in the database, enabling audit trails and proof-of-work generation.</p>
          
          <p><span class="strong">5. Dashboard-First User Experience</span><br>
          All operational intelligence surfaces through the dashboard interface; file exports and reports are secondary utilities.</p>
        </div>

        <div class="card">
          <h3>Technical Foundation</h3>
          <p><span class="strong">API Layer:</span> FastAPI with signed request validation and comprehensive authentication</p>
          <p><span class="strong">Primary Database:</span> PostgreSQL with complete audit trails and temporal data support</p>
          <p><span class="strong">WordPress Database:</span> MariaDB/MySQL for WordPress content only (not OpsGate truth)</p>
          <p><span class="strong">WordPress Integration:</span> Thin plugin with local consent storage and UI presentation</p>
          <p><span class="strong">Execution Layer:</span> Downstream workers (n8n) for scan execution and data processing</p>
          <p><span class="strong">Data Flow Architecture:</span> Plugin → API → PostgreSQL → Workers → API → Dashboard</p>
          <p><span class="strong">Security Framework:</span> Site tokens, request signing, explicit consent for risk-bearing actions</p>
        </div>
      </div>

      <!-- NEW: Evidence-First Contract Explicit Definition -->
      <div class="evidence-callout">
        <h3>Evidence-First Contract (Explicit Definition)</h3>
        <p><span class="strong">Every operational run produces three immutable artifacts:</span></p>
        <div class="grid-3" style="margin-top: 20px;">
          <div>
            <h4 style="color: var(--accent); margin-bottom: 12px;">1. JSON Receipt</h4>
            <p style="color: var(--muted); font-size: 0.95rem;">
              Complete normalized result data stored in PostgreSQL. Includes inputs, outputs, timestamps, and execution context.
            </p>
            <p class="mono" style="font-size: 0.85rem; margin-top: 8px;">Table: job_results</p>
          </div>
          <div>
            <h4 style="color: var(--accent2); margin-bottom: 12px;">2. Activity Entry</h4>
            <p style="color: var(--muted); font-size: 0.95rem;">
              Human-readable timeline event stored in activity_events table. Used for dashboard display and audit trails.
            </p>
            <p class="mono" style="font-size: 0.85rem; margin-top: 8px;">Table: activity_events</p>
          </div>
          <div>
            <h4 style="color: var(--success); margin-bottom: 12px;">3. Artifact Index</h4>
            <p style="color: var(--muted); font-size: 0.95rem;">
              Pointer to any generated files (PDF/CSV/XLSX) in object storage. Metadata stored in artifacts table.
            </p>
            <p class="mono" style="font-size: 0.85rem; margin-top: 8px;">Table: artifacts</p>
          </div>
        </div>
        <p style="margin-top: 20px; color: var(--text);">
          <span class="strong">Contract Rule:</span> No run is considered complete until all three artifacts are persisted and linked.
        </p>
      </div>
    </section>

    <!-- Hybrid Architecture Section -->
    <section id="hybrid" class="wrap section">
      <div class="section-title">
        <span class="dot"></span>
        <span>Hybrid Architecture</span>
      </div>
      <h2>Plugin + Web Platform Integration</h2>
      <p class="section-description">
        OpsGate employs a deliberate hybrid architecture that combines WordPress plugin installation 
        with a centralized web platform, enabling both single-site visibility and multi-site portfolio management.
      </p>

      <div class="highlight-box">
        <h3 style="margin-bottom: 16px;">Why Hybrid Architecture?</h3>
        <p style="color: var(--text); margin-bottom: 20px;">
          The hybrid approach addresses distinct user scenarios while maintaining a single authoritative system:
        </p>
        <div class="grid-2">
          <div>
            <h4 style="color: var(--accent2); margin-bottom: 12px;">WordPress Plugin</h4>
            <ul style="color: var(--muted); line-height: 1.8; padding-left: 20px;">
              <li><span class="strong">Primary User:</span> Single site owners and operators</li>
              <li><span class="strong">Installation:</span> WordPress.org directory distribution</li>
              <li><span class="strong">Purpose:</span> Site-local dashboard, consent management, immediate visibility</li>
              <li><span class="strong">Experience:</span> Embedded within wp-admin, contextual to current site</li>
              <li><span class="strong">Authority:</span> Zero authority – thin client only</li>
            </ul>
          </div>
          <div>
            <h4 style="color: var(--accent2); margin-bottom: 12px;">Web Platform</h4>
            <ul style="color: var(--muted); line-height: 1.8; padding-left: 20px;">
              <li><span class="strong">Primary User:</span> Agencies, portfolio managers, multi-site operators</li>
              <li><span class="strong">Access:</span> Browser-based application at opsgate.com</li>
              <li><span class="strong">Purpose:</span> Multi-site portfolio management, client reporting, team collaboration</li>
              <li><span class="strong">Experience:</span> Cross-site analytics, bulk operations, proof-of-work generation</li>
              <li><span class="strong">Authority:</span> Accesses same authoritative API as plugin</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="hybrid-visual">
        <div class="hybrid-column">
          <div class="card" style="padding: 24px;">
            <h4 style="color: var(--accent); margin-bottom: 12px;">WordPress Plugin</h4>
            <p style="font-size: 0.95rem; color: var(--muted); margin-bottom: 16px;">
              Installed per WordPress site via WordPress.org
            </p>
            <ul style="color: var(--muted); font-size: 0.9rem; padding-left: 16px; line-height: 1.6;">
              <li>Single-site operational dashboard</li>
              <li>Site-local consent storage</li>
              <li>Immediate health visibility</li>
              <li>Manual check initiation</li>
              <li>Plugin settings management</li>
            </ul>
            <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--line);">
              <p class="mono" style="font-size: 0.85rem;">For: free, Starter, Professional tiers</p>
            </div>
          </div>
        </div>

        <div class="hybrid-connector">
          <div class="connector-line"></div>
          <span style="writing-mode: vertical-rl; transform: rotate(180deg);">Shared API Authority</span>
          <div class="connector-line"></div>
        </div>

        <div class="hybrid-column">
          <div class="card" style="padding: 24px;">
            <h4 style="color: var(--accent2); margin-bottom: 12px;">Web Platform</h4>
            <p style="font-size: 0.95rem; color: var(--muted); margin-bottom: 16px;">
              Centralized application at opsgate.com
            </p>
            <ul style="color: var(--muted); font-size: 0.9rem; padding-left: 16px; line-height: 1.6;">
              <li>Multi-site portfolio dashboard</li>
              <li>Client reporting and summaries</li>
              <li>Team collaboration features</li>
              <li>Bulk operations management</li>
              <li>Agency billing and account management</li>
            </ul>
            <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--line);">
              <p class="mono" style="font-size: 0.85rem;">For: Agency tier, team accounts</p>
            </div>
          </div>
        </div>
      </div>

      <div class="grid-2" style="margin-top: 40px;">
        <div class="card">
          <h3>Shared Architectural Foundation</h3>
          <p>Both plugin and web platform components consume the same authoritative API and 
          access the same PostgreSQL database, ensuring consistency across all user experiences.</p>
          
          <p><span class="strong">Common API Endpoints:</span> Both interfaces use identical API contracts</p>
          <p><span class="strong">Shared Authentication:</span> Same token-based authentication system</p>
          <p><span class="strong">Unified Data Model:</span> Consistent data structures and validation rules</p>
          <p><span class="strong">Synchronized Entitlements:</span> Feature access controlled centrally via API</p>
          
          <p style="margin-top: 20px; color: var(--accent2);" class="mono">
            Plugin ≠ Web Platform ≠ Authority<br>
            Plugin + Web Platform → API → PostgreSQL → Truth
          </p>
        </div>

        <div class="card">
          <h3>User Journey Mapping</h3>
          <p><span class="strong">Solo Site Owners:</span> Start with plugin installation → Single-site dashboard → Optional web account creation</p>
          <p><span class="strong">SMB Operators:</span> Plugin installation → Dashboard usage → Web platform for centralized management</p>
          <p><span class="strong">Agencies:</span> Web platform signup → Bulk site onboarding → Plugin deployment to client sites</p>
          
          <div style="margin-top: 24px; padding: 20px; background: rgba(0,0,0,.2); border-radius: 12px;">
            <h4 style="color: var(--text); margin-bottom: 12px;">Key Design Principle</h4>
            <p style="color: var(--muted); font-size: 0.95rem;">
              The plugin provides immediate, contextual value for single-site operators. 
              The web platform enables scale, collaboration, and portfolio management. 
              Both interfaces lead users toward the same operational truth.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Technical Architecture -->
    <section id="architecture" class="wrap section">
      <div class="section-title">
        <span class="dot"></span>
        <span>Technical Architecture</span>
      </div>
      <h2>System Architecture & Data Flow</h2>
      <p class="section-description">
        Clear separation of concerns with single-source truth architecture and downstream execution pattern.
      </p>

      <div class="arch-flow">
        <div class="arch-step">
          <div class="step-number">1</div>
          <div class="step-content">
            <h4>WordPress Plugin (Thin Client)</h4>
            <p>Distributed via WordPress.org. Provides dashboard UI, manages local consent storage, 
            authenticates to API via site tokens. Contains zero business logic, authority, or operational state.</p>
            <p class="mono" style="margin-top: 8px;">Database: MariaDB/MySQL (WordPress content only)</p>
          </div>
        </div>

        <div class="arch-step">
          <div class="step-number">2</div>
          <div class="step-content">
            <h4>Web Platform Interface</h4>
            <p>Browser-based application for portfolio management, team collaboration, and multi-site operations. 
            Consumes same API as plugin, provides agency-grade features and reporting capabilities.</p>
            <p class="mono" style="margin-top: 8px;">Access: Browser-based, multi-site focused</p>
          </div>
        </div>

        <div class="arch-step">
          <div class="step-number">3</div>
          <div class="step-content">
            <h4>Authoritative API Layer (FastAPI)</h4>
            <p>Single point of truth for all operations. Validates entitlements, manages job lifecycle, 
            stores results, enforces business rules. All requests are signed, authenticated, and audited.</p>
            <p class="mono" style="margin-top: 8px;">Role: Business logic enforcement & state validation</p>
          </div>
        </div>

        <div class="arch-step">
          <div class="step-number">4</div>
          <div class="step-content">
            <h4>Authoritative Database (PostgreSQL)</h4>
            <p>Stores all OpsGate operational truth: site registrations, job definitions, execution results, 
            evidence artifacts, audit trails, entitlement definitions. Complete temporal history maintained.</p>
            <p class="mono" style="margin-top: 8px;">Role: Single source of truth for OpsGate state</p>
          </div>
        </div>

        <div class="arch-step">
          <div class="step-number">5</div>
          <div class="step-content">
            <h4>Execution Workers (Downstream Processing)</h4>
            <p>Receive signed job payloads from API, execute scans/checks, return signed results. 
            Completely invisible to end users—no UI exposure, no direct access, no state persistence.</p>
            <p class="mono" style="margin-top: 8px;">Pattern: Stateless callback-based execution</p>
          </div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="card">
        <h3>Database Architecture & Schema Design</h3>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Database System</th>
                <th>Purpose & Scope</th>
                <th>Key Tables/Collections</th>
                <th>Ownership & Authority</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><span class="strong">PostgreSQL</span><br><span class="mono">Primary OpsGate Database</span></td>
                <td>Stores all OpsGate operational truth, evidence, audit trails, and system state</td>
                <td>sites, entitlements, jobs, job_results, activity_events, audit_logs, artifacts</td>
                <td><span class="status-success">Authoritative</span><br>Single source of truth</td>
              </tr>
              <tr>
                <td><span class="strong">MariaDB/MySQL</span><br><span class="mono">WordPress Database</span></td>
                <td>WordPress content, themes, plugins, and local plugin settings only</td>
                <td>wp_posts, wp_options, wp_users, wp_opsgate_consent</td>
                <td><span class="status-info">Local Storage</span><br>Not authoritative for OpsGate</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Business Model -->
    <section id="tiers" class="wrap section">
      <div class="section-title">
        <span class="dot"></span>
        <span>Business Model</span>
      </div>
      <h2>Tiered Service Architecture</h2>
      <p class="section-description">
        Progressive feature unlocks aligned to customer operational maturity, with clear upgrade 
        paths driven by specific operational questions and business needs.
      </p>

      <div class="grid-4">
        <div class="card tier">
          <h3>free</h3>
          <p class="price">$0</p>
          <p class="price-period">per month</p>
          <p>Operational visibility foundation</p>
          <ul style="color: var(--muted); margin-top: 24px; padding-left: 20px; line-height: 1.8;">
            <li>Manual SSL certificate validation</li>
            <li>Basic security configuration scanning</li>
            <li>Dashboard operational view</li>
            <li>24-hour activity timeline</li>
            <li>Protection coverage analysis</li>
          </ul>
          <div style="margin-top: 24px; padding-top: 20px; border-top: 1px solid var(--line);">
            <p class="mono" style="font-size: 0.9rem; color: var(--accent2);">Answers: "What is my current operational status?"</p>
          </div>
        </div>

        <div class="card tier highlight">
          <div class="tier-badge">RECOMMENDED</div>
          <h3>Starter</h3>
          <p class="price">$9</p>
          <p class="price-period">per month / site</p>
          <p>Automated operational intelligence</p>
          <ul style="color: var(--muted); margin-top: 24px; padding-left: 20px; line-height: 1.8;">
            <li>All free tier capabilities</li>
            <li>Scheduled monitoring and validation</li>
            <li>Change detection and delta analysis</li>
            <li>Configurable email alerts</li>
            <li>90-day operational history</li>
            <li>Basic trend visualization</li>
          </ul>
          <div style="margin-top: 24px; padding-top: 20px; border-top: 1px solid var(--line);">
            <p class="mono" style="font-size: 0.9rem; color: var(--accent2);">Answers: "What changed and when did it change?"</p>
          </div>
        </div>

        <div class="card tier">
          <h3>Professional</h3>
          <p class="price">$29</p>
          <p class="price-period">per month / site</p>
          <p>Recovery confidence for revenue operations</p>
          <ul style="color: var(--muted); margin-top: 24px; padding-left: 20px; line-height: 1.8;">
            <li>All Starter tier capabilities</li>
            <li>Automated backup systems</li>
            <li>Consent-gated restore workflows</li>
            <li>Advanced malware detection</li>
            <li>365-day operational history</li>
            <li>Compliance export capabilities</li>
          </ul>
          <div style="margin-top: 24px; padding-top: 20px; border-top: 1px solid var(--line);">
            <p class="mono" style="font-size: 0.9rem; color: var(--accent2);">Answers: "Can I recover if something goes wrong?"</p>
          </div>
        </div>

        <div class="card tier">
          <h3>Agency</h3>
          <p class="price">$99+</p>
          <p class="price-period">per month</p>
          <p>Portfolio operations and proof generation</p>
          <ul style="color: var(--muted); margin-top: 24px; padding-left: 20px; line-height: 1.8;">
            <li>Multi-site portfolio dashboard</li>
            <li>Client-safe operational summaries</li>
            <li>Automated proof-of-work timelines</li>
            <li>SLA compliance workflows</li>
            <li>Team collaboration features</li>
            <li>Volume-based pricing</li>
          </ul>
          <div style="margin-top: 24px; padding-top: 20px; border-top: 1px solid var(--line);">
            <p class="mono" style="font-size: 0.9rem; color: var(--accent2);">Answers: "Can I prove the value I deliver to clients?"</p>
          </div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="card">
        <h3>Hybrid Platform Access by Tier</h3>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Tier</th>
                <th>WordPress Plugin Access</th>
                <th>Web Platform Access</th>
                <th>Primary Interface</th>
                <th>Use Case</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><span class="strong">free</span></td>
                <td><span class="status-success">Full Access</span><br>Single-site dashboard, manual checks</td>
                <td><span class="status-warning">Limited</span><br>Account creation, basic profile</td>
                <td>WordPress Plugin</td>
                <td>Solo site operators, initial discovery</td>
              </tr>
              <tr>
                <td><span class="strong">Starter</span></td>
                <td><span class="status-success">Full Access</span><br>Automated monitoring, alerts</td>
                <td><span class="status-success">Basic Access</span><br>Single-site web dashboard</td>
                <td>WordPress Plugin<br>+ Web Supplement</td>
                <td>Growing sites, basic automation</td>
              </tr>
              <tr>
                <td><span class="strong">Professional</span></td>
                <td><span class="status-success">Full Access</span><br>Advanced features, recovery tools</td>
                <td><span class="status-success">Enhanced Access</span><br>Multi-site view, basic reporting</td>
                <td>Dual Interface</td>
                <td>Revenue-critical sites, recovery focus</td>
              </tr>
              <tr>
                <td><span class="strong">Agency</span></td>
                <td><span class="status-success">Full Access</span><br>All plugin features</td>
                <td><span class="status-success">Complete Access</span><br>Portfolio management, team features</td>
                <td>Web Platform Primary</td>
                <td>Agencies, multi-site operators</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Execution Plan -->
    <section id="execution" class="wrap section">
      <div class="section-title">
        <span class="dot"></span>
        <span>Execution Plan</span>
      </div>
      <h2>Phased Implementation Strategy</h2>
      <p class="section-description">
        ROI-driven delivery focusing on market validation, followed by monetization, then operational 
        expansion, and finally portfolio-scale capabilities.
      </p>

      <div class="grid-3">
        <div class="card">
          <h3>Sprint 1: Foundation (2 Weeks)</h3>
          <p><span class="strong">Focus:</span> Market-ready MVP with core architecture</p>
          <p><span class="strong">Deliverables:</span></p>
          <ul style="color: var(--muted); margin-top: 12px; padding-left: 20px; line-height: 1.8;">
            <li>free tier operational dashboard</li>
            <li>API authority layer implementation</li>
            <li>PostgreSQL database schema</li>
            <li>SSL certificate validation service</li>
            <li>Security configuration scanning</li>
            <li>WordPress plugin v1.0</li>
          </ul>
          <p style="margin-top: 20px;"><span class="strong">Success Metric:</span> 100+ active installations</p>
        </div>

        <div class="card">
          <h3>Sprint 2: Monetization (2 Weeks)</h3>
          <p><span class="strong">Focus:</span> Starter tier launch and conversion funnel</p>
          <p><span class="strong">Deliverables:</span></p>
          <ul style="color: var(--muted); margin-top: 12px; padding-left: 20px; line-height: 1.8;">
            <li>Starter tier entitlement system</li>
            <li>Server-side scheduling engine</li>
            <li>Email alert and notification system</li>
            <li>Change detection and delta analysis</li>
            <li>Dashboard upgrade conversion flows</li>
            <li>Basic web platform foundation</li>
          </ul>
          <p style="margin-top: 20px;"><span class="strong">Success Metric:</span> 5% free-to-Starter conversion rate</p>
        </div>

        <div class="card">
          <h3>Sprint 3: Expansion (3 Weeks)</h3>
          <p><span class="strong">Focus:</span> Professional tier and web platform enhancement</p>
          <p><span class="strong">Deliverables:</span></p>
          <ul style="color: var(--muted); margin-top: 12px; padding-left: 20px; line-height: 1.8;">
            <li>Automated backup systems</li>
            <li>Consent-gated restore workflows</li>
            <li>Advanced malware detection pipeline</li>
            <li>Web platform portfolio features</li>
            <li>Extended history storage system</li>
            <li>Agency tier foundation</li>
          </ul>
          <p style="margin-top: 20px;"><span class="strong">Success Metric:</span> 20% of paid users upgrade to Professional</p>
        </div>
      </div>
    </section>

    <!-- NEW: Quality Assurance Section -->
    <section id="qa" class="wrap section">
      <div class="section-title">
        <span class="dot"></span>
        <span>Quality Assurance Framework</span>
      </div>
      <h2>Comprehensive Testing & Validation Strategy</h2>
      <p class="section-description">
        Enterprise-grade testing framework ensuring system reliability, security compliance, 
        and optimal user experience across all architectural components.
      </p>

      <div class="grid-2">
        <div class="card">
          <h3>Testing Categories & Protocols</h3>
          
          <div style="margin-bottom: 24px;">
            <h4 style="color: var(--critical); margin-bottom: 12px;">Security Testing</h4>
            <ul style="color: var(--muted); padding-left: 20px; line-height: 1.8;">
              <li>API authentication and authorization validation</li>
              <li>Data encryption in transit and at rest verification</li>
              <li>SQL injection and cross-site scripting prevention testing</li>
              <li>Cross-site request forgery protection validation</li>
              <li>Token validation, rotation, and revocation testing</li>
              <li>Consent mechanism security validation</li>
            </ul>
          </div>

          <div style="margin-bottom: 24px;">
            <h4 style="color: var(--warning); margin-bottom: 12px;">Integration Testing</h4>
            <ul style="color: var(--muted); padding-left: 20px; line-height: 1.8;">
              <li>Plugin-API communication protocol validation</li>
              <li>API-PostgreSQL data consistency testing</li>
              <li>Worker callback validation and error recovery testing</li>
              <li>WordPress version compatibility matrix validation</li>
              <li>Third-party service integration testing</li>
              <li>Database migration and schema evolution testing</li>
            </ul>
          </div>

          <div>
            <h4 style="color: var(--success); margin-bottom: 12px;">User Experience Testing</h4>
            <ul style="color: var(--muted); padding-left: 20px; line-height: 1.8;">
              <li>Dashboard load performance validation (&lt;2s target)</li>
              <li>Empty state clarity and guidance testing</li>
              <li>Error message usability and actionability assessment</li>
              <li>Upgrade flow completion rate optimization</li>
              <li>Mobile responsiveness and accessibility compliance</li>
              <li>Cross-browser compatibility validation</li>
            </ul>
          </div>
        </div>

        <div class="card">
          <h3>Validation Checklist & Success Criteria</h3>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Test Case</th>
                  <th>Success Criteria</th>
                  <th>Priority</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>API Authority Enforcement</td>
                  <td>Plugin cannot bypass API for paid features under any condition</td>
                  <td><span class="status-critical">Critical</span></td>
                </tr>
                <tr>
                  <td>Database Truth Maintenance</td>
                  <td>All state changes persist exclusively to PostgreSQL with complete audit trail</td>
                  <td><span class="status-critical">Critical</span></td>
                </tr>
                <tr>
                  <td>Empty State Truthfulness</td>
                  <td>Dashboard explicitly indicates "no data available" rather than implying "all good"</td>
                  <td><span class="status-critical">Critical</span></td>
                </tr>
                <tr>
                  <td>Evidence-First Contract</td>
                  <td>Every run produces JSON receipt + activity entry + artifact index</td>
                  <td><span class="status-critical">Critical</span></td>
                </tr>
                <tr>
                  <td>Worker System Isolation</td>
                  <td>End users have no visibility or access to worker systems or execution details</td>
                  <td><span class="status-warning">High</span></td>
                </tr>
                <tr>
                  <td>Upgrade Flow Reliability</td>
                  <td>free → Starter conversion completes successfully with immediate feature access</td>
                  <td><span class="status-warning">High</span></td>
                </tr>
                <tr>
                  <td>Performance Baseline Compliance</td>
                  <td>Dashboard loads in &lt;2 seconds with empty cache across all supported browsers</td>
                  <td><span class="status-info">Medium</span></td>
                </tr>
                <tr>
                  <td>Database Migration Safety</td>
                  <td>Schema updates execute without data loss or service interruption</td>
                  <td><span class="status-info">Medium</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="card">
        <h3>Risk Mitigation & Contingency Planning</h3>
        <div class="grid-3">
          <div>
            <h4 style="color: var(--critical); margin-bottom: 12px;">Technical Risks</h4>
            <ul style="color: var(--muted); padding-left: 20px; line-height: 1.8;">
              <li>API scalability under production load</li>
              <li>PostgreSQL performance degradation</li>
              <li>Worker failure recovery mechanisms</li>
              <li>Data loss prevention and recovery</li>
              <li>Network latency and connectivity issues</li>
            </ul>
          </div>
          <div>
            <h4 style="color: var(--warning); margin-bottom: 12px;">Business Risks</h4>
            <ul style="color: var(--muted); padding-left: 20px; line-height: 1.8;">
              <li>Low free-to-paid conversion rates</li>
              <li>Market adoption timing and competition</li>
              <li>Competitive response and feature parity</li>
              <li>Pricing model market acceptance</li>
              <li>Customer retention and churn rates</li>
            </ul>
          </div>
          <div>
            <h4 style="color: var(--info); margin-bottom: 12px;">Mitigation Actions</h4>
            <ul style="color: var(--muted); padding-left: 20px; line-height: 1.8;">
              <li>Progressive scaling architecture implementation</li>
              <li>Comprehensive monitoring and alerting systems</li>
              <li>A/B testing for conversion optimization</li>
              <li>Competitive analysis and feature differentiation</li>
              <li>Customer feedback integration cycles</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Final Approval -->
    <section class="wrap section">
      <div class="product-callout">
        <h2>First Product to Market (Locked)</h2>
        <p>
          <strong>Sprint 1 delivers:</strong> OpsGate free + Starter tiers with Dashboard MVP, SSL Posture Service, 
          and Security Scan Service — built on authoritative API architecture with PostgreSQL truth.
        </p>
        <div style="display: flex; gap: 16px; justify-content: center; margin-top: 24px; flex-wrap: wrap;">
          <button class="btn-primary" onclick="window.scrollTo({top: document.getElementById('tiers').offsetTop - 80, behavior: 'smooth'})">
            Review Business Model
          </button>
          <button class="btn-primary" style="background: var(--success);" 
                  onclick="alert('Strategic framework approved. Proceed with Sprint 1 execution per defined architecture and timeline.')">
            Approve Strategic Framework
          </button>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="wrap">
      <div class="footer-content">
        <div style="flex: 2;">
          <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 24px;">
            <div class="logo" style="width: 36px; height: 36px;"></div>
            <span style="font-weight: 700; font-size: 1.25rem; color: var(--text);">OpsGate Strategic Framework</span>
          </div>
          <p style="color: var(--muted); line-height: 1.7; max-width: 600px; margin-bottom: 20px;">
            This document outlines the complete strategic and technical framework for the OpsGate WordPress Operations Control Plane. 
            All architecture decisions follow the established principle: 
            <span class="mono" style="font-size: 0.95rem;">Business Model → API → Data Model → Execution → UI</span>.
          </p>
          <p style="color: var(--muted); font-size: 0.9rem;">
            © 2024 OpsGate. Confidential strategic document for internal review and approval only.
          </p>
        </div>
        <div style="flex: 1;">
          <h4 style="margin-bottom: 20px; color: var(--text); font-size: 1.125rem;">Document Navigation</h4>
          <div style="display: flex; flex-direction: column; gap: 12px;">
            <a href="#problem" style="color: var(--muted); transition: color 0.2s;">Market Analysis</a>
            <a href="#solution" style="color: var(--muted); transition: color 0.2s;">Solution Architecture</a>
            <a href="#hybrid" style="color: var(--muted); transition: color 0.2s;">Hybrid Architecture</a>
            <a href="#architecture" style="color: var(--muted); transition: color 0.2s;">Technical Implementation</a>
            <a href="#tiers" style="color: var(--muted); transition: color 0.2s;">Business Model</a>
            <a href="#execution" style="color: var(--muted); transition: color 0.2s;">Execution Plan</a>
            <a href="#qa" style="color: var(--muted); transition: color 0.2s;">Quality Assurance</a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Enhanced smooth scrolling with offset calculation
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        if (targetId === '#') return;
        
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          const headerOffset = 100;
          const elementPosition = targetElement.getBoundingClientRect().top;
          const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
          
          window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
          });
        }
      });
    });

    // Navigation active state management
    window.addEventListener('scroll', () => {
      const sections = document.querySelectorAll('section[id]');
      const scrollPosition = window.scrollY + 120;
      
      let currentSectionId = '';
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.clientHeight;
        const sectionId = section.getAttribute('id');
        
        if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
          currentSectionId = sectionId;
        }
      });
      
      document.querySelectorAll('.nav-link').forEach(link => {
        const linkHref = link.getAttribute('href').replace('#', '');
        if (linkHref === currentSectionId) {
          link.style.color = 'var(--text)';
          link.style.background = 'rgba(255,255,255,.05)';
          link.style.fontWeight = '600';
        } else {
          link.style.color = 'var(--muted)';
          link.style.background = 'transparent';
          link.style.fontWeight = '500';
        }
      });
    });

    // Initialize navigation state
    window.dispatchEvent(new Event('scroll'));
  </script>
</body>
</html>
